<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#121212">
  <meta name="theme-color" content="#121212">
  <title>Reporte de Roturas</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="icon" type="image/png" href="icon.png">
</head>

<body>
  <div class="container">
    <header>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>Reporte de Roturas MyL</h1>
        <button id="settingsBtn" class="icon-btn" style="font-size: 1.5rem;">⚙️</button>
      </div>
    </header>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
      <div class="modal-content">
        <h2>Configuración</h2>
        <div class="form-group">
          <label for="phoneInput">Teléfono Destino (con código país)</label>
          <input type="tel" id="phoneInput" placeholder="Ej: 34600123456">
          <small style="color: #aaa; display: block; margin-top: 4px;">Sin el símbolo +</small>
        </div>
        <div class="action-area" style="margin-top: 16px;">
          <button id="saveSettingsBtn" class="btn primary full-width">Guardar</button>
          <button id="closeSettingsBtn" class="btn secondary full-width" style="margin-top: 8px;">Cancelar</button>
        </div>
      </div>
    </div>

    <main>
      <!-- Order Section -->
      <section class="card">
        <div class="form-group">
          <label for="orderNumber">Pedido / Factura (Opcional)</label>
          <input type="text" id="orderNumber" placeholder="Ej: 123456" inputmode="text">
        </div>
      </section>


      <!-- Client Section -->
      <section class="card">
        <div class="form-group relative">
          <label for="clientSearch">Cliente</label>
          <input type="text" id="clientSearch" placeholder="Buscar por nombre o código..." autocomplete="off">
          <div id="clientSuggestions" class="suggestions-list hidden"></div>
        </div>
        <div id="selectedClientDisplay" class="selected-client hidden">
          <span id="selectedClientName"></span>
          <button id="clearClientBtn" class="icon-btn">&times;</button>
        </div>
      </section>

      <!-- Items Section -->
      <section class="card">
        <h2>Artículos con Rotura</h2>
        <div class="item-input-row">
          <div class="form-group grow">
            <label for="itemCode">Cód. Artículo</label>
            <input type="text" id="itemCode" placeholder="Código">
          </div>
          <div class="form-group shrink">
            <label for="itemQty">Cant.</label>
            <input type="number" id="itemQty" placeholder="1" value="" min="1" inputmode="numeric">
          </div>
        </div>
        <!-- Per-item comment -->
        <div class="form-group">
          <input type="text" id="itemComment" placeholder="Comentario para este artículo (opcional)">
        </div>

        <button id="addItemBtn" class="btn secondary full-width">+ Añadir Artículo</button>

        <div id="itemsList" class="items-list">
          <!-- Items will be added here -->
        </div>
      </section>

      <!-- Action Section -->

      <div class="action-area">
        <button id="sendBtn" class="btn primary full-width">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path
              d="M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.711 2.592 2.654-.696c1.029.575 1.943.84 3.071.841 3.18 0 5.767-2.587 5.767-5.766.001-3.182-2.585-5.769-5.766-5.769zm9.318 9.319c1.697-3.181 1.084-7.202-1.747-9.721-2.903-2.585-7.377-2.576-10.264.02-2.738 2.463-3.415 6.471-1.746 9.682l-2.091 7.636 7.822-2.051c1.293.425 2.593.593 3.846.593 3.197 0 6.182-1.282 8.356-3.486 1.487-1.508 2.306-3.488 2.306-5.619 0-1.896-.645-3.692-1.803-5.263l-.679 8.216z" />
          </svg>
          Enviar WhatsApp
        </button>
        <div style="text-align: center; margin-top: 12px; font-size: 0.85rem; color: #888;">
          Enviando a: <span id="currentPhoneDisplay" style="color: #ccc;">...</span>
          <button id="changePhoneBtn"
            style="background:none; border:none; color: var(--accent-color); text-decoration: underline; cursor: pointer; margin-left: 4px; font-size: 0.85rem;">(Cambiar)</button>
        </div>
      </div>
    </main>
  </div>
  <script type="module" src="app.js"></script>
</body>

</html>